{"ast":null,"code":"var _jsxFileName = \"/Users/flatironschool/dev/mod5-project/best-offer/best-offer-frontend/src/components/ContractorShowPage.js\";\nimport React from \"react\";\nimport { Button, Comment, Form, Header, Rating, Card } from \"semantic-ui-react\";\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport ReviewForm from \"./ReviewForm\";\nexport default class ContractorShowPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      rating: 3\n    };\n\n    this.handleRate = (e, {\n      rating,\n      maxRating\n    }) => {\n      this.setState({\n        rating: rating\n      });\n    };\n\n    this.CommentExampleComment = review => {\n      return React.createElement(Comment, {\n        key: review.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22\n        },\n        __self: this\n      }, React.createElement(Comment.Avatar, {\n        src: review.user.img_url,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }), React.createElement(Comment.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }, React.createElement(Comment.Author, {\n        as: \"a\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25\n        },\n        __self: this\n      }, review.user.name), React.createElement(Comment.Metadata, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27\n        },\n        __self: this\n      }, review.created_at.split(\"T\")[0], \" \", React.createElement(Rating, {\n        icon: \"star\",\n        disabled: true,\n        rating: review.stars,\n        maxRating: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }))), React.createElement(Comment.Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, review.content)));\n    };\n\n    this.averageStars = () => {\n      let sum = this.props.contractor.reviews.reduce((a, b) => ({\n        stars: a.stars + b.stars\n      })).stars;\n      let avg = sum / this.props.contractor.reviews.length;\n      return avg.toFixed(2);\n    };\n\n    this.acceptedBid = () => {\n      let acceptBid = [];\n      let r = false;\n      this.props.user.tasks.map(task => task.bids.map(bid => bid.status === true && this.props.contractor.id == bid.contractor_id ? acceptBid.push(bid) : bid));\n\n      if (acceptBid.length > 0) {\n        this.props.contractor.id === acceptBid[0].contractor_id ? r = true : r = false;\n      }\n\n      return r;\n    };\n\n    this.doneTaskNames = () => {\n      let acceptBid = [];\n      this.props.user.tasks.map(task => task.bids.map(bid => bid.status === true && this.props.contractor.id == bid.contractor_id ? acceptBid.push(task) : bid));\n      return acceptBid;\n    };\n\n    this.disableForm = () => {\n      let reviews = this.props.contractor.reviews.filter(review => review.user_id === this.props.user.id);\n      return reviews.length >= this.doneTaskNames().length ? true : false;\n    };\n\n    this.CardExampleLinkCard = task => {\n      return React.createElement(Card, {\n        color: \"green\",\n        href: \"/task/\".concat(task.id),\n        header: task.name,\n        meta: task.specialty.name[0].toUpperCase() + task.specialty.name.slice(1),\n        description: \"Description: \".concat(task.description, \" \"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      });\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"bids\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Card, {\n      image: this.props.contractor.img_url,\n      header: this.props.contractor.name,\n      meta: \"My Specialties Are \".concat(this.props.contractor.specialties[0].name[0].toUpperCase() + this.props.contractor.specialties[0].name.slice(1), \" \\n    and \").concat(this.props.contractor.specialties[1].name[0].toUpperCase() + this.props.contractor.specialties[1].name.slice(1)),\n      description: \"A professional with \".concat(Math.floor(Math.random() * 30) + 2, \" years of experience\"),\n      extra: \"Check my great reviews!!!!\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), this.acceptedBid() ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"You accpted a bid from this contractor to complete these tasks: \"), this.doneTaskNames().map(task => {\n      return React.createElement(\"div\", {\n        key: Math.floor(Math.random() * 100000000000 + 1),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, this.CardExampleLinkCard(task));\n    })) : null, React.createElement(Comment.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(ReviewForm, {\n      addNewReview: this.props.addNewReview,\n      contractor: this.props.contractor,\n      disableForm: this.disableForm(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Reviews: \", this.props.contractor.reviews.slice(0).reverse().map(review => this.CommentExampleComment(review)))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/flatironschool/dev/mod5-project/best-offer/best-offer-frontend/src/components/ContractorShowPage.js"],"names":["React","Button","Comment","Form","Header","Rating","Card","BrowserRouter","Router","Route","Switch","Redirect","ReviewForm","ContractorShowPage","Component","state","rating","handleRate","e","maxRating","setState","CommentExampleComment","review","id","user","img_url","name","created_at","split","stars","content","averageStars","sum","props","contractor","reviews","reduce","a","b","avg","length","toFixed","acceptedBid","acceptBid","r","tasks","map","task","bids","bid","status","contractor_id","push","doneTaskNames","disableForm","filter","user_id","CardExampleLinkCard","specialty","toUpperCase","slice","description","render","specialties","Math","floor","random","addNewReview","reverse"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Button, Comment, Form, Header, Rating, Card } from \"semantic-ui-react\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  Redirect\n} from \"react-router-dom\";\nimport ReviewForm from \"./ReviewForm\";\n\nexport default class ContractorShowPage extends React.Component {\n  state = { rating: 3 };\n\n  handleRate = (e, { rating, maxRating }) => {\n    this.setState({\n      rating: rating\n    });\n  };\n\n  CommentExampleComment = review => {\n    return (\n      <Comment key={review.id}>\n        <Comment.Avatar src={review.user.img_url} />\n        <Comment.Content>\n          <Comment.Author as=\"a\">{review.user.name}</Comment.Author>\n          <Comment.Metadata>\n            <div>\n              {review.created_at.split(\"T\")[0]}{\" \"}\n              <Rating\n                icon=\"star\"\n                disabled\n                rating={review.stars}\n                maxRating={5}\n              />\n            </div>\n          </Comment.Metadata>\n          <Comment.Text>{review.content}</Comment.Text>\n          {/* <Comment.Actions>\n          <Comment.Action>Reply</Comment.Action>\n        </Comment.Actions> */}\n        </Comment.Content>\n      </Comment>\n    );\n  };\n\n  averageStars = () => {\n    let sum = this.props.contractor.reviews.reduce((a, b) => ({\n      stars: a.stars + b.stars\n    })).stars;\n\n    let avg = sum / this.props.contractor.reviews.length;\n    return avg.toFixed(2);\n  };\n\n  acceptedBid = () => {\n    let acceptBid = [];\n    let r = false;\n    this.props.user.tasks.map(task =>\n      task.bids.map(bid =>\n        bid.status === true && this.props.contractor.id == bid.contractor_id\n          ? acceptBid.push(bid)\n          : bid\n      )\n    );\n\n    if (acceptBid.length > 0) {\n      this.props.contractor.id === acceptBid[0].contractor_id\n        ? (r = true)\n        : (r = false);\n    }\n\n    return r;\n  };\n\n  doneTaskNames = () => {\n    let acceptBid = [];\n\n    this.props.user.tasks.map(task =>\n      task.bids.map(bid =>\n        bid.status === true && this.props.contractor.id == bid.contractor_id\n          ? acceptBid.push(task)\n          : bid\n      )\n    );\n\n    return acceptBid;\n  };\n\n  disableForm = () => {\n    let reviews = this.props.contractor.reviews.filter(\n      review => review.user_id === this.props.user.id\n    );\n    return reviews.length >= this.doneTaskNames().length ? true : false;\n  };\n\n  CardExampleLinkCard = task => {\n    \n    return (\n      <Card\n        color=\"green\"\n        href={`/task/${task.id}`}\n        header={task.name}\n        meta={\n          task.specialty.name[0].toUpperCase() + task.specialty.name.slice(1)\n        }\n        description={`Description: ${task.description} `}\n      />\n    );\n  };\n\n  render() {\n    return (\n      <div>\n        <br />\n        <br />\n\n        <div className=\"bids\">\n          <Card\n            image={this.props.contractor.img_url}\n            header={this.props.contractor.name}\n            meta={`My Specialties Are ${this.props.contractor.specialties[0].name[0].toUpperCase() +\n              this.props.contractor.specialties[0].name.slice(1)} \n    and ${this.props.contractor.specialties[1].name[0].toUpperCase() +\n      this.props.contractor.specialties[1].name.slice(1)}`}\n            description={`A professional with ${Math.floor(Math.random() * 30) +\n              2} years of experience`}\n            extra={\"Check my great reviews!!!!\"}\n          />\n\n          {this.acceptedBid() ? (\n            <div>\n              <h4>You accpted a bid from this contractor to complete these tasks: </h4>\n              {this.doneTaskNames().map(task => {\n                return (\n                  <div key={Math.floor(Math.random() * 100000000000 + 1)}>\n                    {this.CardExampleLinkCard(task)}\n                  </div>\n                );\n              })}\n            </div>\n          ) : null}\n          <Comment.Group>\n            <ReviewForm\n              addNewReview={this.props.addNewReview}\n              contractor={this.props.contractor}\n              disableForm={this.disableForm()}\n            />\n            {<div>Reviews: {this.props.contractor.reviews\n              .slice(0)\n              .reverse()\n              .map(review => this.CommentExampleComment(review))}</div>}\n          </Comment.Group>\n          <div></div>\n        </div>\n      </div>\n    );\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}