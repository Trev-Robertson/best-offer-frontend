{"ast":null,"code":"var _jsxFileName = \"/Users/flatironschool/dev/mod5-project/best-offer/best-offer-frontend/src/components/ContractorTaskShowPage.js\";\nimport React from \"react\";\nimport { Button, Card, Image } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\nconst TASKS = \"http://localhost:3000/tasks/\";\nexport default class ContractorTaskShowPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      anyBidsSelected: false,\n      sortedBids: [],\n      currentTask: []\n    };\n\n    this.sortBids = bids => {\n      let sorted = bids.sort((a, b) => a.price > b.price ? 1 : -1);\n      return sorted;\n    };\n\n    this.bidAccepted = bid => {\n      this.setState({\n        anyBidsSelected: true\n      }, () => this.props.acceptBid(bid, this.props.task));\n    };\n\n    this.bidDeclined = bid => {\n      if (bid.status) {\n        this.setState({\n          anyBidsSelected: false\n        }, () => this.props.deleteBid(bid));\n      } else {\n        this.props.deleteBid(bid);\n      }\n    };\n\n    this.componentDidMount = () => {\n      fetch(TASKS + this.props.id).then(res => res.json()).then(task => {\n        console.log(task);\n        this.setState({\n          currentTask: task\n        });\n        task.bids.forEach(bid => {\n          if (bid.status) {\n            this.setState({\n              anyBidsSelected: true\n            });\n            return true;\n          }\n        });\n        this.setState({\n          sortedBids: this.sortBids(task.bids)\n        });\n      });\n    };\n\n    this.CardExampleGroups = () => {\n      debugger;\n      let bid;\n      this.state.currentTask.task_done ? bid = this.state.currentTask.bids.find(bid => bid.status === true) : bid = this.state.sortedBids[0];\n      return this.state.sortedBids[0] ? React.createElement(Card.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(Card.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), bid.status ? React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Winning Bid\") : null, React.createElement(Card.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(Card.Meta, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, bid.status ? \"Winning Bid: $\".concat(bid.price) : null)), React.createElement(Card.Content, {\n        extra: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, !bid.status ? React.createElement(\"div\", {\n        className: \"ui two buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(Button, {\n        disabled: bid.status,\n        onClick: () => console.log('click'),\n        basic: true,\n        color: \"blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Make a Bid\")) // <div className=\"ui two buttons\">\n      // <Button\n      //   disabled={bid.status}\n      //   onClick={() => console.log('click')}\n      //   basic\n      //   color=\"blue\"\n      // >\n      //   Make a Bid\n      // </Button>\n      // </div>\n      : null))) : null;\n    };\n\n    this.showBid = () => {\n      if (this.state.currentTask[0]) {\n        let bid = this.state.currentTask.task_done ? this.state.currentTask.bids.find(bid => bid.status === true) : this.state.sortedBids[0];\n        return bid;\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \" \"), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Title:\", \" \", React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, this.state.currentTask.name)), \" \"), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"Description: \", React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, this.state.currentTask.description), \" \"), this.state.currentTask.task_done ? React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \" Winning Bid: \", this.showBid()) : React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Lowest Current Bid: $\", this.state.sortedBids[0] ? this.state.sortedBids[0].price : null), React.createElement(\"div\", {\n      className: \"bids\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, this.CardExampleGroups()));\n  }\n\n}","map":{"version":3,"sources":["/Users/flatironschool/dev/mod5-project/best-offer/best-offer-frontend/src/components/ContractorTaskShowPage.js"],"names":["React","Button","Card","Image","Link","TASKS","ContractorTaskShowPage","Component","state","anyBidsSelected","sortedBids","currentTask","sortBids","bids","sorted","sort","a","b","price","bidAccepted","bid","setState","props","acceptBid","task","bidDeclined","status","deleteBid","componentDidMount","fetch","id","then","res","json","console","log","forEach","CardExampleGroups","task_done","find","showBid","render","name","description"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Button, Card, Image } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\n\nconst TASKS = \"http://localhost:3000/tasks/\"\n\nexport default class ContractorTaskShowPage extends React.Component {\n  state = {\n    anyBidsSelected: false,\n    sortedBids: [],\n    currentTask: []\n  };\n\n  sortBids = (bids) => {\n\n    let sorted = bids.sort((a, b) =>\n      a.price > b.price ? 1 : -1\n    );\n    return sorted;\n  };\n\n  bidAccepted = bid => {\n    this.setState(\n      {\n        anyBidsSelected: true\n      },\n      () => this.props.acceptBid(bid, this.props.task)\n    );\n  };\n\n  bidDeclined = bid => {\n    if (bid.status) {\n      this.setState(\n        {\n          anyBidsSelected: false\n        },\n        () => this.props.deleteBid(bid)\n      );\n    } else {\n      this.props.deleteBid(bid);\n    }\n  };\n\n  componentDidMount = () => {\n\n    fetch(TASKS + this.props.id)\n    .then(res => res.json())\n    .then(task => {\n      console.log(task)\n      this.setState({\n        currentTask: task\n      })\n      task.bids.forEach(bid => {\n      if (bid.status) {\n        this.setState({\n          anyBidsSelected: true\n        });\n        return true;\n      }\n    });\n\n    this.setState({\n      sortedBids: this.sortBids(task.bids)\n    })\n  });\n  };\n\n  CardExampleGroups = () => {\n    debugger\n    let bid\n    this.state.currentTask.task_done ? bid = this.state.currentTask.bids.find(bid => bid.status === true) : bid = this.state.sortedBids[0]\n    \n   return this.state.sortedBids[0] ?\n     <Card.Group>\n        <Card>\n          <Card.Content >\n           \n            <h1>\n           \n            </h1>\n            {bid.status ? <h1>Winning Bid</h1> : null}\n            <Card.Header></Card.Header>\n            <Card.Meta>\n              {bid.status ? `Winning Bid: $${bid.price}` : null}\n            </Card.Meta>\n            \n          </Card.Content>\n          <Card.Content extra>\n            {!bid.status ? \n\n              <div className=\"ui two buttons\">\n                <Button\n                  disabled={bid.status}\n                  onClick={() => console.log('click')}\n                  basic\n                  color=\"blue\"\n                >\n                  Make a Bid\n                </Button>\n              </div>\n\n              // <div className=\"ui two buttons\">\n              // <Button\n              //   disabled={bid.status}\n              //   onClick={() => console.log('click')}\n              //   basic\n              //   color=\"blue\"\n              // >\n              //   Make a Bid\n              // </Button>\n              // </div>\n             : null}\n          </Card.Content>\n        </Card>\n      </Card.Group>\n     : null\n  };\n\n  showBid = () => {\n    if (this.state.currentTask[0]){\n      let bid = this.state.currentTask.task_done ?  this.state.currentTask.bids.find(bid => bid.status === true) : this.state.sortedBids[0]\n    return bid\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Link to=\"/profile\">\n          {\" \"}\n        </Link>\n           <h1>\n          Title:{\" \"}\n          <h3>\n            <strong>{this.state.currentTask.name}</strong>\n          </h3>{\" \"}\n        </h1>\n        <h1>\n          Description: <h3>{this.state.currentTask.description}</h3>{\" \"}\n        </h1>\n        {this.state.currentTask.task_done ? <h1> Winning Bid: {this.showBid()}</h1> : <h1>Lowest Current Bid: ${this.state.sortedBids[0]? this.state.sortedBids[0].price: null}</h1>}\n        {/* <h1>Lowest Current Bid: ${this.state.sortedBids[0]? this.state.sortedBids[0].price: null}</h1> */}\n        <div className=\"bids\">\n              {this.CardExampleGroups()}\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}